<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
<!-- Copyright (c) 2023 Sam Blenny -->
<!-- SPDX-License-Identifier: MIT  -->
<meta name="viewport" content="initial-scale=1.0, width=device-width">
<title>draw</title>
<style>
:root{ /* Default to light theme */
--CBG:#fff9f9;   /* bg */
--CFG1:#000;     /* fg 1 */
--CFG2:#6b6b6b;  /* fg 2 (lower emphasis) */
--CA1:#bbb;      /* accent 1 */
--CA2:#eee;      /* accent 2 (lower emphasis) */
--SVG_SIZE:512px;  /* Size of SVG in px including pre-multiplied zoom factor */
--EDIT_WIDE:400px; /* Width of editor textarea */
}
html,body,div,textarea,h1,p,svg{margin:0;padding:0;}
*{box-sizing:border-box;}
body,div,textarea,p,svg,table,tr,td,code{
  color:inherit;background:inherit;font-size:inherit;
}
body{
  color:var(--CFG2);
  font-size:16px;
  font-family:Verdana,Arial,Helvetica,sans-serif;
  background:var(--CBG);
  padding:13px;
}
h1{font-size:19px;font-weight:bold;margin:5px 2px 8px 0px;}
p{padding:0 3px 8px 3px;max-width:800px;}
select{
  color:var(--CFG1);background:var(--CBG);
  display:inline-block;margin:5px 0;
}
#gridA{grid-area:A;}
#gridB{grid-area:B;}
#gridC{grid-area:C;}
#gridD{grid-area:D;}
#grid-wrapper{
  display:grid;
  grid:". . . . ." 35px
       ". A . C ." 30px
       ". B . D ." 514px
       ". . . . ." 20px / 10px 400px 10px 514px 1fr;
}
#editor{
  outline:none;
  resize:none;
  font-family:"Courier New",monospace;
  font-size:16px;
  border:1px solid var(--CA1);
  display:inline-block;
  background:var(--CBG);
  color:var(--CFG1);
  height:100%;
  width:var(--EDIT_WIDE);
  padding:7px;
}
#canvas-svg{
  display:inline-block;
  box-sizing:content-box; /* don't let border mess up content scaling */
  margin:0;
  border:1px solid var(--CA1);
  color:var(--CFG1);
  background:var(--CBG);
  width:var(--SVG_SIZE);
  height:var(--SVG_SIZE);
  stroke:var(--CFG1);
  stroke-width:1px;
  fill:none;
  stroke-linejoin:round;
  stroke-linecap:round;
}
.grid{stroke:var(--CA2);}
#builtin td{border:1px solid var(--CA1);padding:5px}
#builtin td:first-child{
  font-weight:bold;font-family:"Courier New",monospace;
  text-align:right;padding-right:5px;background:var(--CBG);
}
code{
  font-weight:bold;font-family:"Courier New",monospace;
  display:inline-block;padding:0px 5px 0px 5px;
  background:var(--CBG);border:1px solid var(--CA1);
}
@media (prefers-color-scheme: dark) {
:root{ /* Dark Theme */
--CBG:#1e1e23;   /* bg */
--CFG1:#eee;     /* fg 1 */
--CFG2:#8a8a8a;  /* fg 2 (lower emphasis) */
--CA1:#5a5a5a;   /* accent 1 */
--CA2:#323232;   /* accent 2 (lower emphasis) */
}
}
</style>
</head><body>

<h1>Draw</h1>

<p>
This is an interactive SVG vector drawing system inspired by Forth and Logo.
As you type in the box on the left, the drawing will update on the right.
Scroll down for language documentation.
</p>

<div id="grid-wrapper">

<div id="gridA">
 <label>buffer:
  <select id="edit-select">
   <option value="">--scratch--</option>
   <option selected value="LotsOfDots">sample: Lots of Dots</option>
   <option value="Fibonacci">sample: Fibonacci</option>
   <option value="Sierpinski">sample: Sierpinski</option>
  </select>
 </label>
</div>

<div id="gridB">
 <textarea id="editor" spellcheck="false" autofocus></textarea>
</div>

<div id="gridC">
 <label>size, zoom:
  <select id="canvas-size">
   <option          value="64">64x64px, 8x</option>
   <option          value="128">128x128px, 4x</option>
   <option          value="256">256x256px, 2x</option>
   <option selected value="512">512x512px, 1x</option>
  </select>
 </label>
</div>

<div id="gridD">
 <svg id="canvas-svg" viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
  <path class="grid" d="M100 0 L100 600" />
  <path class="grid" d="M200 0 L200 600" />
  <path class="grid" d="M300 0 L300 600" />
  <path class="grid" d="M400 0 L400 600" />
  <path class="grid" d="M500 0 L500 600" />
  <path class="grid" d="M0 100 L600 100" />
  <path class="grid" d="M0 200 L600 200" />
  <path class="grid" d="M0 300 L600 300" />
  <path class="grid" d="M0 400 L600 400" />
  <path class="grid" d="M0 500 L600 500" />
 </svg>
</div>

</div>

<h2>Language Intro</h2>

<p>This drawing language has basic RPN calculator functionality, the ability to
define Forth-like &quot;words&quot; representing re-usable shapes, unit
conversions, etc., and the ability to fit very concise code next to a live
preview image.</p>

<p>This language is case sensitive, and it uses postfix notation with a stack.
In the tradition of Forth-like languages, things like <code>:</code>,
<code>3.14</code>, <code>+</code>, <code>;</code>, and <code>foo</code> are
&quot;words&quot;. Words must be separated by spaces. Comments start with
<code>#</code> and continue until the end of the line. Word definitions look
like <code>: word ... ;</code>. To add 1 and 1, you say <code>1 1 +</code>. To
go 2 units forward, you could say <code>2 F</code>, <code>1 1 + F</code>, or
<code>: two 1 1 + ; two F</code>.
</p>

<p>The following table shows the built-in words with a short explanation for
each. Some words, like <code>TRON</code>, don't change the stack. Other words
pop 1 or 2 operands off of the stack. Some words push 1 result back onto the
stack.  In the descriptions for words which pop operands, <b>T</b> is the
number which was on <em>top</em> of the stack, and <b>S</b> is the number which
was <em>second</em> on the stack.
</p>
<br />

<table id="builtin">
<tr>
  <td>#</td> <td>The rest of the line is a comment</td>
</tr><tr>
  <td>:</td> <td>Start defining the word whose name follows ":"</td>
</tr><tr>
  <td>;</td> <td>Stop defining a word</td>
</tr><tr>
  <td>+</td> <td>Add <b>T</b> to <b>S</b> (pop 2, push 1)</td>
</tr><tr>
  <td>-</td> <td>Subtract <b>T</b> from <b>S</b> (pop 2, push 1)</td>
</tr><tr>
  <td>*</td> <td>Multiply <b>T</b> by <b>S</b> (pop 2, push 1)</td>
</tr><tr>
  <td>dup</td> <td>Duplicate <b>T</b> (push 1)</td>
</tr><tr>
  <td>drop</td> <td>Discard <b>T</b> (pop 1)</td>
</tr><tr>
  <td>swap</td> <td>Swap <b>T</b> with <b>S</b></td>
</tr><tr>
  <td>over</td> <td>Push a copy of <b>S</b> (push 1)</td>
</tr><tr>
  <td>F</td> <td>Move turtle forward <b>T</b> units (pop 1)</td>
</tr><tr>
  <td>B</td> <td>Move turtle backward <b>T</b> units (pop 1)</td>
</tr><tr>
  <td>L</td> <td>Turn turtle left <b>T</b> degrees (pop 1)</td>
</tr><tr>
  <td>R</td> <td>Turn turtle right <b>T</b> degrees (pop 1)</td>
</tr><tr>
  <td>N</td> <td>Move turtle North <b>T</b> units with pen up (pop 1)</td>
</tr><tr>
  <td>S</td> <td>Move turtle South <b>T</b> units with pen up (pop 1)</td>
</tr><tr>
  <td>E</td> <td>Move turtle East <b>T</b> units with pen up (pop 1)</td>
</tr><tr>
  <td>W</td> <td>Move turtle West <b>T</b> units with pen up (pop 1)</td>
</tr><tr>
  <td>ArcL</td>
  <td>Draw a circular arc with radius <b>S</b> units and length <b>T</b>
      degrees, curving to the left (pop 2)
  </td>
</tr><tr>
  <td>ArcR</td>
  <td>Draw a circular arc with radius <b>S</b> units and length <b>T</b>
      degrees, curving to the right (pop 2)
  </td>
</tr><tr>
  <td>Dot</td> <td>Draw a dot of radius <b>T</b> (pop 1)</td>
</tr><tr>
  <td>PD</td> <td>Pen down (make lines when moving, default=down)</td>
</tr><tr>
  <td>PU</td> <td>Pen up (move without making lines, default=down)</td>
</tr><tr>
  <td>SetH</td> <td>Turtle heading = <b>T</b> degrees (pop 1)</td>
</tr><tr>
  <td>SetX</td> <td>Turtle X coordinate = <b>T</b> (pop 1)</td>
</tr><tr>
  <td>SetX</td> <td>Turtle Y coordinate = <b>T</b> (pop 1)</td>
</tr><tr>
  <td>TROFF</td> <td>Turn debug tracing off (default=off)</td>
</tr><tr>
  <td>TRON</td> <td>Turn debug tracing to console log on (default=off)</td>
</tr><tr>
  <td>NOP</td> <td>Do nothing, can be useful while tracing the stack</td>
</tr>
</table>
<br />

<script type="module" src="draw.js"></script>

</body>
</html>

